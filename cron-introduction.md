## cron 的使用详解

> 定时任务被用于安排那些需要周期性执行的命令。cron 是 linux 最为实用的工具之一，cron 服务在后台运行，并会持续性地检查 /etc/crontab 文件及 /etc/cron.\*/ 目录。

1. **crontab 命令**

   crontab 是用来安装、卸载或列出定时任务列表的命令。因为每个用户都可以拥有自己的 crontab 文件，虽然这些文件都位于 /var/spool/cron/ 目录中，但并不意味着你可以直接编辑他们，所以 crontab 命令就很有必要！

2. **cron 有两个配置文件**，一个是全局配置文件（/etc/crontab），是针对系统任务；一组是 crontab 命令生成的配置文件（/var/spool/cron目录下的文件），是针对于某个用户的定时任务配置。

3. **crontab 任务配置基本格式**

   ```
        *          *           *            *          *
    分钟(0-59)  小时(0-23)  日期(1-31)  月份(1-12)  一周当中的某天(0-6)  command
                                                    [7或者0表示周日]
   ```

   操作符允许为一个字段指定多个值。

   星号（\*）：此操作符为字段指定所有可用值，如在小时字段下使用则表示每个小时，同理在月份字段下表示每个月；

   逗号（,）：指定了包含多个值的列表，如：1,5,10,20;

   横杠（-）：指定一个范围，如5-15等同于5,6,7 ... 15;

   正斜杠（/）：用来指定一个步进值，为一间隔频率，如 0-59/2 用来在分钟字段定义每两分钟；如果希望每2小时执行一次，则在小时字段下 \*/2。

4. **其他**

   默认情况某个命令或者脚本的输出会发送到本地邮箱，若想停止接收则在执行命令 command 后加入 `> /dev/null 2>&1` ，也可以通过 /etc/crontab 中的MAILTO修改邮箱账户

   * crontab   -e  编辑任务；
   * crontab   -l  列出当前用户下的任务；
   * crontab   -r  删除当前所有定时任务；
   * crontab   -u usename  -l  （需要root权限）

5. **特殊字符**

   @reboot    @yearly（@annually）    @monthly     @weekly     @daily      @midnight      @hourly

   以上可以替他crontab配置基本格式的前五个字段，如@hourly command

   **/etc/cron.d/**：类似于/etc/crontab总的配置，不过/etc/cron.d中添加的配置需要重启crond服务才能生效，而/etc/crontab中更新的配置则不需要重启服务。corn.d中的配置文件权限必须为644，且属主为root；

   **/etc/cron.daily/**：运行时需要每天执行一次的脚本；

   **/etc/cron.hourly/**：运行时需要每小时执行一次的脚本


